{"version":3,"file":"define.mjs","sources":["../src/shared/model.ts","../src/shared/parse.ts","../src/shared/element.ts","../src/parse.ts","../src/define.ts"],"sourcesContent":["/* -----------------------------------\n *\n * Component\n *\n * -------------------------------- */\n\ntype IComponent = any;\n\n/* -----------------------------------\n *\n * Options\n *\n * -------------------------------- */\n\ninterface IOptions<F = any, W = any> {\n  attributes?: string[];\n  formatProps?: (props: any) => F;\n  wrapComponent?: (child: any) => W;\n}\n\n/* -----------------------------------\n *\n * Errors\n *\n * -------------------------------- */\n\nenum ErrorTypes {\n  Promise = 'Error: Promises cannot be used for SSR',\n  Missing = 'Error: Cannot find component in provided function',\n  Json = 'Error: Invalid JSON string passed to component',\n}\n\n/* -----------------------------------\n *\n * Element\n *\n * -------------------------------- */\n\ninterface CustomElement<C = any, I = any> extends HTMLElement {\n  __mounted: boolean;\n  __component: C;\n  __properties?: IProps;\n  __slots?: { [index: string]: any };\n  __instance?: I;\n  __children?: any;\n  __options: IOptions;\n}\n\n/* -----------------------------------\n *\n * IProps\n *\n * -------------------------------- */\n\ninterface IProps {\n  [index: string]: any;\n}\n\n/* -----------------------------------\n *\n * Guards\n *\n * -------------------------------- */\n\nconst isPromise = (input: any): input is Promise<any> => {\n  return input && typeof input.then === 'function';\n};\n\n/* -----------------------------------\n *\n * Self Closing\n *\n * -------------------------------- */\n\nconst selfClosingTags = [\n  'area',\n  'base',\n  'br',\n  'col',\n  'hr',\n  'img',\n  'input',\n  'link',\n  'meta',\n  'source',\n  'embed',\n  'param',\n  'track',\n  'wbr',\n];\n\n/* -----------------------------------\n *\n * Export\n *\n * -------------------------------- */\n\nexport { IComponent, IOptions, IProps, ErrorTypes, CustomElement, isPromise, selfClosingTags };\n","import { IProps, CustomElement, ErrorTypes } from './model';\n\n/* -----------------------------------\n *\n * parseJson\n *\n * -------------------------------- */\n\nfunction parseJson(this: CustomElement, value: string) {\n  const { tagName } = this;\n  const { formatProps } = this.__options;\n\n  let result = {};\n\n  try {\n    result = JSON.parse(value);\n  } catch {\n    console.error(ErrorTypes.Json, `: <${tagName.toLowerCase()}>`);\n  }\n\n  if (formatProps) {\n    result = formatProps(result);\n  }\n\n  return result;\n}\n\n/* -----------------------------------\n *\n * getDocument\n *\n * -------------------------------- */\n\nfunction getDocument(html: string) {\n  const value = `<!DOCTYPE html>\\n<html><body>${html}</body></html>`;\n\n  let nodes: Document;\n\n  try {\n    nodes = new DOMParser().parseFromString(value, 'text/html');\n  } catch {\n    // no-op\n  }\n\n  if (!nodes) {\n    return void 0;\n  }\n\n  return nodes.body;\n}\n\n/* -----------------------------------\n *\n * getAttributeObject\n *\n * -------------------------------- */\n\nfunction getAttributeObject(attributes: NamedNodeMap): IProps {\n  const result = {};\n\n  if (!attributes?.length) {\n    return result;\n  }\n\n  for (let i = attributes.length - 1; i >= 0; i--) {\n    const item = attributes[i];\n\n    result[item.name] = item.value;\n  }\n\n  return result;\n}\n\n/* -----------------------------------\n *\n * getAttributeProps\n *\n * -------------------------------- */\n\nfunction getAttributeProps(attributes: NamedNodeMap, allowed?: string[]): IProps {\n  const values = getAttributeObject(attributes);\n\n  let result = {};\n\n  for (const key of Object.keys(values)) {\n    if (allowed?.indexOf(key) === -1) {\n      continue;\n    }\n\n    result[getPropKey(key)] = values[key];\n  }\n\n  return result;\n}\n\n/* -----------------------------------\n *\n * Attribute\n *\n * -------------------------------- */\n\nfunction getPropKey(value: string) {\n  const sanitised = value.trim().replace(/[\\s_]/g, '-');\n\n  return (\n    sanitised.charAt(0).toLowerCase() +\n    sanitised.slice(1).replace(/-([a-z])/g, ({ 1: value }) => value.toUpperCase())\n  );\n}\n\n/* -----------------------------------\n *\n * Export\n *\n * -------------------------------- */\n\nexport { parseJson, getDocument, getPropKey, getAttributeObject, getAttributeProps };\n","import { getAttributeProps } from './parse';\nimport { IComponent, CustomElement } from './model';\n\n/* -----------------------------------\n *\n * Async\n *\n * -------------------------------- */\n\nfunction getAsyncComponent(component: Promise<IComponent>, tagName: string): Promise<any> {\n  return component.then((response) => getComponentResult(response, tagName));\n}\n\n/* -----------------------------------\n *\n * Result\n *\n * -------------------------------- */\n\nfunction getComponentResult(response: IComponent, tagName: string) {\n  let result = void 0;\n\n  if (typeof response === 'function') {\n    return response;\n  }\n\n  if (typeof response === 'object') {\n    result = response[getNameFromTag(tagName)] || void 0;\n  }\n\n  return result;\n}\n\n/* -----------------------------------\n *\n * Element\n *\n * -------------------------------- */\n\nfunction getElementTag(tagName: string) {\n  let result = tagName.toLowerCase();\n\n  if (result.indexOf('-') < 0) {\n    result = 'component-' + result;\n  }\n\n  return result;\n}\n\n/* -----------------------------------\n *\n * Tag\n *\n * -------------------------------- */\n\nfunction getNameFromTag(value: string) {\n  value = value.toLowerCase();\n\n  return value.replace(/(^\\w|-\\w)/g, (item) => item.replace(/-/, '').toUpperCase());\n}\n\n/* -----------------------------------\n *\n * Attributes\n *\n * -------------------------------- */\n\nfunction getElementAttributes(this: CustomElement) {\n  const { attributes = [] } = this.__options;\n  const result = {};\n\n  if (!this.hasAttributes()) {\n    return result;\n  }\n\n  return getAttributeProps(this.attributes, attributes);\n}\n\n/* -----------------------------------\n *\n * Export\n *\n * -------------------------------- */\n\nexport { getElementTag, getElementAttributes, getAsyncComponent };\n","import { h, ComponentFactory, Fragment } from 'preact';\nimport {\n  CustomElement,\n  getDocument,\n  getAttributeObject,\n  selfClosingTags,\n  getPropKey,\n} from './shared';\n\n/* -----------------------------------\n *\n * parseHtml\n *\n * -------------------------------- */\n\nfunction parseHtml(this: CustomElement): ComponentFactory<{}> {\n  const dom = getDocument(this.innerHTML);\n\n  if (!dom) {\n    return void 0;\n  }\n\n  const result = convertToVDom.call(this, dom);\n\n  return () => result;\n}\n\n/* -----------------------------------\n *\n * convertToVDom\n *\n * -------------------------------- */\n\nfunction convertToVDom(this: CustomElement, node: Element) {\n  if (node.nodeType === 3) {\n    return node.textContent?.trim() || '';\n  }\n\n  if (node.nodeType !== 1) {\n    return null;\n  }\n\n  const nodeName = String(node.nodeName).toLowerCase();\n  const childNodes = Array.from(node.childNodes);\n\n  const children = () => childNodes.map((child) => convertToVDom.call(this, child));\n  const { slot, ...props } = getAttributeObject(node.attributes);\n\n  if (nodeName === 'script') {\n    return null;\n  }\n\n  if (nodeName === 'body') {\n    return h(Fragment, {}, children());\n  }\n\n  if (selfClosingTags.includes(nodeName)) {\n    return h(nodeName, props);\n  }\n\n  if (slot) {\n    this.__slots[getPropKey(slot)] = getSlotChildren(children());\n\n    return null;\n  }\n\n  return h(nodeName, props, children());\n}\n\n/* -----------------------------------\n *\n * getSlotChildren\n *\n * -------------------------------- */\n\nfunction getSlotChildren(children: JSX.Element[]) {\n  const isString = (item) => typeof item === 'string';\n\n  if (children.every(isString)) {\n    return children.join(' ');\n  }\n\n  return h(Fragment, {}, children);\n}\n\n/* -----------------------------------\n *\n * Export\n *\n * -------------------------------- */\n\nexport { parseHtml };\n","import { h, render, ComponentFactory, FunctionComponent } from 'preact';\nimport {\n  IProps,\n  ErrorTypes,\n  CustomElement,\n  isPromise,\n  parseJson,\n  getElementTag,\n  getPropKey,\n  getElementAttributes,\n  getAsyncComponent,\n} from './shared';\nimport { parseHtml } from './parse';\nimport { IOptions, ComponentFunction } from './model';\n\n/* -----------------------------------\n *\n * Define\n *\n * -------------------------------- */\n\nfunction define<P = {}>(\n  tagName: string,\n  child: ComponentFunction<P>,\n  options: IOptions = {}\n): FunctionComponent<P> {\n  const { wrapComponent } = options;\n  const preRender = typeof window === 'undefined';\n  const elementTag = getElementTag(tagName);\n\n  if (!preRender) {\n    customElements.define(elementTag, setupElement(child, options));\n\n    return;\n  }\n\n  const content = child();\n\n  if (isPromise(content)) {\n    throw new Error(`${ErrorTypes.Promise} : <${tagName}>`);\n  }\n\n  let component = content;\n\n  if (wrapComponent) {\n    component = wrapComponent(content);\n  }\n\n  return (props: P) =>\n    h(elementTag, { server: true }, [\n      h('script', {\n        type: 'application/json',\n        dangerouslySetInnerHTML: { __html: JSON.stringify(props) },\n      }),\n      h(component, props),\n    ]);\n}\n\n/* -----------------------------------\n *\n * Setup\n *\n * -------------------------------- */\n\nfunction setupElement<T>(component: ComponentFunction<T>, options: IOptions = {}): any {\n  const { attributes = [], formAssociated = false } = options;\n\n  if (typeof Reflect !== 'undefined' && Reflect.construct) {\n    const CustomElement = function () {\n      const element = Reflect.construct(HTMLElement, [], CustomElement);\n\n      element.__mounted = false;\n      element.__component = component;\n      element.__properties = {};\n      element.__slots = {};\n      element.__children = void 0;\n      element.__options = options;\n\n      return element;\n    };\n\n    CustomElement.observedAttributes = ['props', ...attributes];\n    CustomElement.formAssociated = formAssociated;\n\n    CustomElement.prototype = Object.create(HTMLElement.prototype);\n    CustomElement.prototype.constructor = CustomElement;\n    CustomElement.prototype.connectedCallback = onConnected;\n    CustomElement.prototype.attributeChangedCallback = onAttributeChange;\n    CustomElement.prototype.disconnectedCallback = onDisconnected;\n\n    return CustomElement;\n  }\n\n  return class CustomElement extends HTMLElement {\n    __mounted = false;\n    __component = component;\n    __properties = {};\n    __slots = {};\n    __children = void 0;\n    __options = options;\n\n    static observedAttributes = ['props', ...attributes];\n    static formAssociated = formAssociated;\n\n    public connectedCallback() {\n      onConnected.call(this);\n    }\n\n    public attributeChangedCallback(...args) {\n      onAttributeChange.call(this, ...args);\n    }\n\n    public disconnectedCallback() {\n      onDisconnected.call(this);\n    }\n  };\n}\n\n/* -----------------------------------\n *\n * Connected\n *\n * -------------------------------- */\n\nfunction onConnected(this: CustomElement) {\n  const attributes = getElementAttributes.call(this);\n  const props = this.getAttribute('props');\n  const json = this.querySelector('[type=\"application/json\"]');\n  const data = parseJson.call(this, props || json?.innerHTML || '{}');\n\n  json?.remove();\n\n  let children = this.__children;\n\n  if (!this.__mounted && !this.hasAttribute('server')) {\n    children = h(parseHtml.call(this), {});\n  }\n\n  this.__properties = { ...this.__slots, ...data, ...attributes };\n  this.__children = children || [];\n\n  this.removeAttribute('server');\n  this.innerHTML = '';\n\n  const response = this.__component();\n  const renderer = (result: ComponentFactory) => finaliseComponent.call(this, result);\n\n  if (isPromise(response)) {\n    getAsyncComponent(response, this.tagName).then(renderer);\n\n    return;\n  }\n\n  renderer(response);\n}\n\n/* -----------------------------------\n *\n * Attribute\n *\n * -------------------------------- */\n\nfunction onAttributeChange(this: CustomElement, name: string, original: string, updated: string) {\n  if (!this.__mounted) {\n    return;\n  }\n\n  updated = updated == null ? void 0 : updated;\n\n  let props = this.__properties;\n\n  if (name === 'props') {\n    props = { ...props, ...parseJson.call(this, updated) };\n  } else {\n    props[getPropKey(name)] = updated;\n  }\n\n  this.__properties = props;\n\n  render(h(this.__instance, { ...props, parent: this, children: this.__children }), this);\n}\n\n/* -----------------------------------\n *\n * Disconnected\n *\n * -------------------------------- */\n\nfunction onDisconnected(this: CustomElement) {\n  render(null, this);\n}\n\n/* -----------------------------------\n *\n * Finalise\n *\n * -------------------------------- */\n\nfunction finaliseComponent(this: CustomElement, component: ComponentFactory<IProps>) {\n  const { tagName } = this;\n  const { wrapComponent } = this.__options;\n\n  if (!component) {\n    console.error(ErrorTypes.Missing, `: <${tagName.toLowerCase()}>`);\n\n    return;\n  }\n\n  if (wrapComponent) {\n    component = wrapComponent(component);\n  }\n\n  this.__instance = component;\n  this.__mounted = true;\n\n  const props = {\n    ...this.__properties,\n    parent: this,\n    children: this.__children,\n  };\n\n  render(h(component, props), this);\n}\n\n/* -----------------------------------\n *\n * Export\n *\n * -------------------------------- */\n\nexport { define };\n"],"names":["ErrorTypes","isPromise","input","then","selfClosingTags","parseJson","value","tagName","this","formatProps","__options","result","JSON","parse","console","error","Json","toLowerCase","attributes","length","i","item","name","getPropKey","sanitised","trim","replace","charAt","slice","toUpperCase","getElementAttributes","hasAttributes","allowed","values","getAttributeObject","key","Object","keys","indexOf","parseHtml","dom","html","nodes","DOMParser","parseFromString","body","getDocument","innerHTML","convertToVDom","call","node","nodeType","textContent","nodeName","String","childNodes","Array","from","children","map","child","slot","props","h","Fragment","includes","__slots","every","join","getSlotChildren","options","wrapComponent","elementTag","getElementTag","preRender","customElements","define","component","_class","formAssociated","Reflect","construct","CustomElement","HTMLElement","element","__mounted","__component","__properties","__children","observedAttributes","prototype","create","constructor","connectedCallback","onConnected","attributeChangedCallback","onAttributeChange","disconnectedCallback","onDisconnected","setupElement","content","Promise","server","type","dangerouslySetInnerHTML","__html","stringify","getAttribute","json","querySelector","remove","hasAttribute","data","removeAttribute","response","renderer","finaliseComponent","getComponentResult","original","updated","render","__instance","parent","Missing"],"mappings":"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"}