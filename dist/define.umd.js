!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("preact")):"function"==typeof define&&define.amd?define(["exports","preact"],e):e((t||self).preactement={},t.preact)}(this,function(t,e){var n;!function(t){t.Promise="Error: Promises cannot be used for SSR",t.Missing="Error: Cannot find component in provided function",t.Json="Error: Invalid JSON string passed to component"}(n||(n={}));const o=t=>t&&"function"==typeof t.then,r=["area","base","br","col","hr","img","input","link","meta","source","embed","param","track","wbr"];function i(t){const{tagName:e}=this,{formatProps:o}=this.__options;let r={};try{r=JSON.parse(t)}catch{console.error(n.Json,`: <${e.toLowerCase()}>`)}return o&&(r=o(r)),r}function s(t){const e={};if(!t?.length)return e;for(let n=t.length-1;n>=0;n--){const o=t[n];e[o.name]=o.value}return e}function c(t){const e=t.trim().replace(/[\s_]/g,"-");return e.charAt(0).toLowerCase()+e.slice(1).replace(/-([a-z])/g,({1:t})=>t.toUpperCase())}function l(){const{attributes:t=[]}=this.__options;return this.hasAttributes()?function(t,e){const n=s(t);let o={};for(const t of Object.keys(n))-1!==e?.indexOf(t)&&(o[c(t)]=n[t]);return o}(this.attributes,t):{}}function a(){const t=function(t){const e=`<!DOCTYPE html>\n<html><body>${t}</body></html>`;let n;try{n=(new DOMParser).parseFromString(e,"text/html")}catch{}if(n)return n.body}(this.innerHTML);if(!t)return;const e=p.call(this,t);return()=>e}function p(t){if(3===t.nodeType)return t.textContent?.trim()||"";if(1!==t.nodeType)return null;const n=String(t.nodeName).toLowerCase(),o=Array.from(t.childNodes),i=()=>o.map(t=>p.call(this,t)),{slot:l,...a}=s(t.attributes);return"script"===n?null:"body"===n?e.h(e.Fragment,{},i()):r.includes(n)?e.h(n,a):l?(this.__slots[c(l)]=function(t){return t.every(t=>"string"==typeof t)?t.join(" "):e.h(e.Fragment,{},t)}(i()),null):e.h(n,a,i())}function h(){const t=l.call(this),n=this.getAttribute("props"),r=this.querySelector('[type="application/json"]'),s=i.call(this,n||r?.innerHTML||"{}");r?.remove();let c=this.__children;this.__mounted||this.hasAttribute("server")||(c=e.h(a.call(this),{})),this.__properties={...this.__slots,...s,...t},this.__children=c||[],this.removeAttribute("server"),this.innerHTML="";const p=this.__component(),h=t=>f.call(this,t);var u,d;o(p)?(u=p,d=this.tagName,u.then(t=>function(t,e){let n;return"function"==typeof t?t:("object"==typeof t&&(n=t[(o=e,(o=o.toLowerCase()).replace(/(^\w|-\w)/g,t=>t.replace(/-/,"").toUpperCase()))]||void 0),n);var o}(t,d))).then(h):h(p)}function u(t,n,o){if(!this.__mounted)return;o=null==o?void 0:o;let r=this.__properties;"props"===t?r={...r,...i.call(this,o)}:r[c(t)]=o,this.__properties=r,e.render(e.h(this.__instance,{...r,parent:this,children:this.__children}),this)}function d(){e.render(null,this)}function f(t){const{tagName:o}=this,{wrapComponent:r}=this.__options;if(!t)return void console.error(n.Missing,`: <${o.toLowerCase()}>`);r&&(t=r(t)),this.__instance=t,this.__mounted=!0;const i={...this.__properties,parent:this,children:this.__children};e.render(e.h(t,i),this)}t.define=function(t,r,i={}){const{wrapComponent:s}=i,c="undefined"==typeof window,l=function(t){let e=t.toLowerCase();return e.indexOf("-")<0&&(e="component-"+e),e}(t);if(!c)return void customElements.define(l,function(t,e={}){var n;const{attributes:o=[],formAssociated:r=!1}=e;if("undefined"!=typeof Reflect&&Reflect.construct){const n=function(){const o=Reflect.construct(HTMLElement,[],n);return o.__mounted=!1,o.__component=t,o.__properties={},o.__slots={},o.__children=void 0,o.__options=e,o};return n.observedAttributes=["props",...o],n.formAssociated=r,n.prototype=Object.create(HTMLElement.prototype),n.prototype.constructor=n,n.prototype.connectedCallback=h,n.prototype.attributeChangedCallback=u,n.prototype.disconnectedCallback=d,n}return n=class extends HTMLElement{constructor(...n){super(...n),this.__mounted=!1,this.__component=t,this.__properties={},this.__slots={},this.__children=void 0,this.__options=e}connectedCallback(){h.call(this)}attributeChangedCallback(){u.call(this,...[].slice.call(arguments))}disconnectedCallback(){d.call(this)}},n.observedAttributes=["props",...o],n.formAssociated=r,n}(r,i));const a=r();if(o(a))throw new Error(`${n.Promise} : <${t}>`);let p=a;return s&&(p=s(a)),t=>e.h(l,{server:!0},[e.h("script",{type:"application/json",dangerouslySetInnerHTML:{__html:JSON.stringify(t)}}),e.h(p,t)])}});
//# sourceMappingURL=define.umd.js.map
