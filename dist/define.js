var t,e=require("preact");!function(t){t.Promise="Error: Promises cannot be used for SSR",t.Missing="Error: Cannot find component in provided function",t.Json="Error: Invalid JSON string passed to component"}(t||(t={}));const n=t=>t&&"function"==typeof t.then,r=["area","base","br","col","hr","img","input","link","meta","source","embed","param","track","wbr"];function o(e){const{tagName:n}=this,{formatProps:r}=this.__options;let o={};try{o=JSON.parse(e)}catch{console.error(t.Json,`: <${n.toLowerCase()}>`)}return r&&(o=r(o)),o}function s(t){const e={};if(!t?.length)return e;for(let n=t.length-1;n>=0;n--){const r=t[n];e[r.name]=r.value}return e}function i(t){const e=t.trim().replace(/[\s_]/g,"-");return e.charAt(0).toLowerCase()+e.slice(1).replace(/-([a-z])/g,({1:t})=>t.toUpperCase())}function c(){const{attributes:t=[]}=this.__options;return this.hasAttributes()?function(t,e){const n=s(t);let r={};for(const t of Object.keys(n))-1!==e?.indexOf(t)&&(r[i(t)]=n[t]);return r}(this.attributes,t):{}}function l(){const t=function(t){const e=`<!DOCTYPE html>\n<html><body>${t}</body></html>`;let n;try{n=(new DOMParser).parseFromString(e,"text/html")}catch{}if(n)return n.body}(this.innerHTML);if(!t)return;const e=a.call(this,t);return()=>e}function a(t){if(3===t.nodeType)return t.textContent?.trim()||"";if(1!==t.nodeType)return null;const n=String(t.nodeName).toLowerCase(),o=Array.from(t.childNodes),c=()=>o.map(t=>a.call(this,t)),{slot:l,...h}=s(t.attributes);return"script"===n?null:"body"===n?e.h(e.Fragment,{},c()):r.includes(n)?e.h(n,h):l?(this.__slots[i(l)]=function(t){return t.every(t=>"string"==typeof t)?t.join(" "):e.h(e.Fragment,{},t)}(c()),null):e.h(n,h,c())}function h(){const t=c.call(this),r=this.getAttribute("props"),s=this.querySelector('[type="application/json"]'),i=o.call(this,r||s?.innerHTML||"{}");s?.remove();let a=this.__children;this.__mounted||this.hasAttribute("server")||(a=e.h(l.call(this),{})),this.__properties={...this.__slots,...i,...t},this.__children=a||[],this.removeAttribute("server"),this.innerHTML="";const h=this.__component(),p=t=>_.call(this,t);var u,d;n(h)?(u=h,d=this.tagName,u.then(t=>function(t,e){let n;return"function"==typeof t?t:("object"==typeof t&&(n=t[(r=e,(r=r.toLowerCase()).replace(/(^\w|-\w)/g,t=>t.replace(/-/,"").toUpperCase()))]||void 0),n);var r}(t,d))).then(p):p(h)}function p(t,n,r){if(!this.__mounted)return;r=null==r?void 0:r;let s=this.__properties;"props"===t?s={...s,...o.call(this,r)}:s[i(t)]=r,this.__properties=s,e.render(e.h(this.__instance,{...s,parent:this,children:this.__children}),this)}function u(){e.render(null,this)}function _(n){const{tagName:r}=this,{wrapComponent:o}=this.__options;if(!n)return void console.error(t.Missing,`: <${r.toLowerCase()}>`);o&&(n=o(n)),this.__instance=n,this.__mounted=!0;const s={...this.__properties,parent:this,children:this.__children};e.render(e.h(n,s),this)}exports.define=function(r,o,s={}){const{wrapComponent:i}=s,c="undefined"==typeof window,l=function(t){let e=t.toLowerCase();return e.indexOf("-")<0&&(e="component-"+e),e}(r);if(!c)return void customElements.define(l,function(t,e={}){var n;const{attributes:r=[],formAssociated:o=!1}=e;if("undefined"!=typeof Reflect&&Reflect.construct){const n=function(){const r=Reflect.construct(HTMLElement,[],n);return r.__mounted=!1,r.__component=t,r.__properties={},r.__slots={},r.__children=void 0,r.__options=e,r};return n.observedAttributes=["props",...r],n.formAssociated=o,n.prototype=Object.create(HTMLElement.prototype),n.prototype.constructor=n,n.prototype.connectedCallback=h,n.prototype.attributeChangedCallback=p,n.prototype.disconnectedCallback=u,n}return n=class extends HTMLElement{constructor(...n){super(...n),this.__mounted=!1,this.__component=t,this.__properties={},this.__slots={},this.__children=void 0,this.__options=e}connectedCallback(){h.call(this)}attributeChangedCallback(){p.call(this,...[].slice.call(arguments))}disconnectedCallback(){u.call(this)}},n.observedAttributes=["props",...r],n.formAssociated=o,n}(o,s));const a=o();if(n(a))throw new Error(`${t.Promise} : <${r}>`);let _=a;return i&&(_=i(a)),t=>e.h(l,{server:!0},[e.h("script",{type:"application/json",dangerouslySetInnerHTML:{__html:JSON.stringify(t)}}),e.h(_,t)])};
//# sourceMappingURL=define.js.map
