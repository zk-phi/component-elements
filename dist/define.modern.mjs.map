{"version":3,"file":"define.modern.mjs","sources":["../src/shared/model.ts","../src/shared/parse.ts","../src/shared/element.ts","../src/parse.ts","../src/define.ts"],"sourcesContent":["/* -----------------------------------\n *\n * Component\n *\n * -------------------------------- */\n\ntype IComponent = any;\n\n/* -----------------------------------\n *\n * Options\n *\n * -------------------------------- */\n\ninterface IOptions<F = any, W = any> {\n  attributes?: string[];\n  formatProps?: (props: any) => F;\n  wrapComponent?: (child: any) => W;\n}\n\n/* -----------------------------------\n *\n * Errors\n *\n * -------------------------------- */\n\nenum ErrorTypes {\n  Promise = 'Error: Promises cannot be used for SSR',\n  Missing = 'Error: Cannot find component in provided function',\n  Json = 'Error: Invalid JSON string passed to component',\n}\n\n/* -----------------------------------\n *\n * Element\n *\n * -------------------------------- */\n\ninterface CustomElement<C = any, I = any> extends HTMLElement {\n  __mounted: boolean;\n  __component: C;\n  __properties?: IProps;\n  __slots?: { [index: string]: any };\n  __instance?: I;\n  __children?: any;\n  __options: IOptions;\n}\n\n/* -----------------------------------\n *\n * IProps\n *\n * -------------------------------- */\n\ninterface IProps {\n  [index: string]: any;\n}\n\n/* -----------------------------------\n *\n * Guards\n *\n * -------------------------------- */\n\nconst isPromise = (input: any): input is Promise<any> => {\n  return input && typeof input.then === 'function';\n};\n\n/* -----------------------------------\n *\n * Self Closing\n *\n * -------------------------------- */\n\nconst selfClosingTags = [\n  'area',\n  'base',\n  'br',\n  'col',\n  'hr',\n  'img',\n  'input',\n  'link',\n  'meta',\n  'source',\n  'embed',\n  'param',\n  'track',\n  'wbr',\n];\n\n/* -----------------------------------\n *\n * Export\n *\n * -------------------------------- */\n\nexport { IComponent, IOptions, IProps, ErrorTypes, CustomElement, isPromise, selfClosingTags };\n","import { IProps, CustomElement, ErrorTypes } from './model';\n\n/* -----------------------------------\n *\n * parseJson\n *\n * -------------------------------- */\n\nfunction parseJson(this: CustomElement, value: string) {\n  const { tagName } = this;\n  const { formatProps } = this.__options;\n\n  let result = {};\n\n  try {\n    result = JSON.parse(value);\n  } catch {\n    console.error(ErrorTypes.Json, `: <${tagName.toLowerCase()}>`);\n  }\n\n  if (formatProps) {\n    result = formatProps(result);\n  }\n\n  return result;\n}\n\n/* -----------------------------------\n *\n * getDocument\n *\n * -------------------------------- */\n\nfunction getDocument(html: string) {\n  const value = `<!DOCTYPE html>\\n<html><body>${html}</body></html>`;\n\n  let nodes: Document;\n\n  try {\n    nodes = new DOMParser().parseFromString(value, 'text/html');\n  } catch {\n    // no-op\n  }\n\n  if (!nodes) {\n    return void 0;\n  }\n\n  return nodes.body;\n}\n\n/* -----------------------------------\n *\n * getAttributeObject\n *\n * -------------------------------- */\n\nfunction getAttributeObject(attributes: NamedNodeMap): IProps {\n  const result = {};\n\n  if (!attributes?.length) {\n    return result;\n  }\n\n  for (let i = attributes.length - 1; i >= 0; i--) {\n    const item = attributes[i];\n\n    result[item.name] = item.value;\n  }\n\n  return result;\n}\n\n/* -----------------------------------\n *\n * getAttributeProps\n *\n * -------------------------------- */\n\nfunction getAttributeProps(attributes: NamedNodeMap, allowed?: string[]): IProps {\n  const values = getAttributeObject(attributes);\n\n  let result = {};\n\n  for (const key of Object.keys(values)) {\n    if (allowed?.indexOf(key) === -1) {\n      continue;\n    }\n\n    result[getPropKey(key)] = values[key];\n  }\n\n  return result;\n}\n\n/* -----------------------------------\n *\n * Attribute\n *\n * -------------------------------- */\n\nfunction getPropKey(value: string) {\n  const sanitised = value.trim().replace(/[\\s_]/g, '-');\n\n  return (\n    sanitised.charAt(0).toLowerCase() +\n    sanitised.slice(1).replace(/-([a-z])/g, ({ 1: value }) => value.toUpperCase())\n  );\n}\n\n/* -----------------------------------\n *\n * Export\n *\n * -------------------------------- */\n\nexport { parseJson, getDocument, getPropKey, getAttributeObject, getAttributeProps };\n","import { getAttributeProps } from './parse';\nimport { IComponent, CustomElement } from './model';\n\n/* -----------------------------------\n *\n * Async\n *\n * -------------------------------- */\n\nfunction getAsyncComponent(component: Promise<IComponent>, tagName: string): Promise<any> {\n  return component.then((response) => getComponentResult(response, tagName));\n}\n\n/* -----------------------------------\n *\n * Result\n *\n * -------------------------------- */\n\nfunction getComponentResult(response: IComponent, tagName: string) {\n  let result = void 0;\n\n  if (typeof response === 'function') {\n    return response;\n  }\n\n  if (typeof response === 'object') {\n    result = response[getNameFromTag(tagName)] || void 0;\n  }\n\n  return result;\n}\n\n/* -----------------------------------\n *\n * Element\n *\n * -------------------------------- */\n\nfunction getElementTag(tagName: string) {\n  let result = tagName.toLowerCase();\n\n  if (result.indexOf('-') < 0) {\n    result = 'component-' + result;\n  }\n\n  return result;\n}\n\n/* -----------------------------------\n *\n * Tag\n *\n * -------------------------------- */\n\nfunction getNameFromTag(value: string) {\n  value = value.toLowerCase();\n\n  return value.replace(/(^\\w|-\\w)/g, (item) => item.replace(/-/, '').toUpperCase());\n}\n\n/* -----------------------------------\n *\n * Attributes\n *\n * -------------------------------- */\n\nfunction getElementAttributes(this: CustomElement) {\n  const { attributes = [] } = this.__options;\n  const result = {};\n\n  if (!this.hasAttributes()) {\n    return result;\n  }\n\n  return getAttributeProps(this.attributes, attributes);\n}\n\n/* -----------------------------------\n *\n * Export\n *\n * -------------------------------- */\n\nexport { getElementTag, getElementAttributes, getAsyncComponent };\n","import { h, ComponentFactory, Fragment } from 'preact';\nimport {\n  CustomElement,\n  getDocument,\n  getAttributeObject,\n  selfClosingTags,\n  getPropKey,\n} from './shared';\n\n/* -----------------------------------\n *\n * parseHtml\n *\n * -------------------------------- */\n\nfunction parseHtml(this: CustomElement): ComponentFactory<{}> {\n  const dom = getDocument(this.innerHTML);\n\n  if (!dom) {\n    return void 0;\n  }\n\n  const result = convertToVDom.call(this, dom);\n\n  return () => result;\n}\n\n/* -----------------------------------\n *\n * convertToVDom\n *\n * -------------------------------- */\n\nfunction convertToVDom(this: CustomElement, node: Element) {\n  if (node.nodeType === 3) {\n    return node.textContent?.trim() || '';\n  }\n\n  if (node.nodeType !== 1) {\n    return null;\n  }\n\n  const nodeName = String(node.nodeName).toLowerCase();\n  const childNodes = Array.from(node.childNodes);\n\n  const children = () => childNodes.map((child) => convertToVDom.call(this, child));\n  const { slot, ...props } = getAttributeObject(node.attributes);\n\n  if (nodeName === 'script') {\n    return null;\n  }\n\n  if (nodeName === 'body') {\n    return h(Fragment, {}, children());\n  }\n\n  if (selfClosingTags.includes(nodeName)) {\n    return h(nodeName, props);\n  }\n\n  if (slot) {\n    this.__slots[getPropKey(slot)] = getSlotChildren(children());\n\n    return null;\n  }\n\n  return h(nodeName, props, children());\n}\n\n/* -----------------------------------\n *\n * getSlotChildren\n *\n * -------------------------------- */\n\nfunction getSlotChildren(children: JSX.Element[]) {\n  const isString = (item) => typeof item === 'string';\n\n  if (children.every(isString)) {\n    return children.join(' ');\n  }\n\n  return h(Fragment, {}, children);\n}\n\n/* -----------------------------------\n *\n * Export\n *\n * -------------------------------- */\n\nexport { parseHtml };\n","import { h, render, ComponentFactory, FunctionComponent } from 'preact';\nimport {\n  IProps,\n  ErrorTypes,\n  CustomElement,\n  isPromise,\n  parseJson,\n  getElementTag,\n  getPropKey,\n  getElementAttributes,\n  getAsyncComponent,\n} from './shared';\nimport { parseHtml } from './parse';\nimport { IOptions, ComponentFunction } from './model';\n\n/* -----------------------------------\n *\n * Define\n *\n * -------------------------------- */\n\nfunction define<P = {}>(\n  tagName: string,\n  child: ComponentFunction<P>,\n  options: IOptions = {}\n): FunctionComponent<P> {\n  const { wrapComponent } = options;\n  const preRender = typeof window === 'undefined';\n  const elementTag = getElementTag(tagName);\n\n  if (!preRender) {\n    customElements.define(elementTag, setupElement(child, options));\n\n    return;\n  }\n\n  const content = child();\n\n  if (isPromise(content)) {\n    throw new Error(`${ErrorTypes.Promise} : <${tagName}>`);\n  }\n\n  let component = content;\n\n  if (wrapComponent) {\n    component = wrapComponent(content);\n  }\n\n  return (props: P) =>\n    h(elementTag, { server: true }, [\n      h('script', {\n        type: 'application/json',\n        dangerouslySetInnerHTML: { __html: JSON.stringify(props) },\n      }),\n      h(component, props),\n    ]);\n}\n\n/* -----------------------------------\n *\n * Setup\n *\n * -------------------------------- */\n\nfunction setupElement<T>(component: ComponentFunction<T>, options: IOptions = {}): any {\n  const { attributes = [], formAssociated = false } = options;\n\n  if (typeof Reflect !== 'undefined' && Reflect.construct) {\n    const CustomElement = function () {\n      const element = Reflect.construct(HTMLElement, [], CustomElement);\n\n      element.__mounted = false;\n      element.__component = component;\n      element.__properties = {};\n      element.__slots = {};\n      element.__children = void 0;\n      element.__options = options;\n\n      return element;\n    };\n\n    CustomElement.observedAttributes = ['props', ...attributes];\n    CustomElement.formAssociated = formAssociated;\n\n    CustomElement.prototype = Object.create(HTMLElement.prototype);\n    CustomElement.prototype.constructor = CustomElement;\n    CustomElement.prototype.connectedCallback = onConnected;\n    CustomElement.prototype.attributeChangedCallback = onAttributeChange;\n    CustomElement.prototype.disconnectedCallback = onDisconnected;\n\n    return CustomElement;\n  }\n\n  return class CustomElement extends HTMLElement {\n    __mounted = false;\n    __component = component;\n    __properties = {};\n    __slots = {};\n    __children = void 0;\n    __options = options;\n\n    static observedAttributes = ['props', ...attributes];\n    static formAssociated = formAssociated;\n\n    public connectedCallback() {\n      onConnected.call(this);\n    }\n\n    public attributeChangedCallback(...args) {\n      onAttributeChange.call(this, ...args);\n    }\n\n    public disconnectedCallback() {\n      onDisconnected.call(this);\n    }\n  };\n}\n\n/* -----------------------------------\n *\n * Connected\n *\n * -------------------------------- */\n\nfunction onConnected(this: CustomElement) {\n  const attributes = getElementAttributes.call(this);\n  const props = this.getAttribute('props');\n  const json = this.querySelector('[type=\"application/json\"]');\n  const data = parseJson.call(this, props || json?.innerHTML || '{}');\n\n  json?.remove();\n\n  let children = this.__children;\n\n  if (!this.__mounted && !this.hasAttribute('server')) {\n    children = h(parseHtml.call(this), {});\n  }\n\n  this.__properties = { ...this.__slots, ...data, ...attributes };\n  this.__children = children || [];\n\n  this.removeAttribute('server');\n  this.innerHTML = '';\n\n  const response = this.__component();\n  const renderer = (result: ComponentFactory) => finaliseComponent.call(this, result);\n\n  if (isPromise(response)) {\n    getAsyncComponent(response, this.tagName).then(renderer);\n\n    return;\n  }\n\n  renderer(response);\n}\n\n/* -----------------------------------\n *\n * Attribute\n *\n * -------------------------------- */\n\nfunction onAttributeChange(this: CustomElement, name: string, original: string, updated: string) {\n  if (!this.__mounted) {\n    return;\n  }\n\n  updated = updated == null ? void 0 : updated;\n\n  let props = this.__properties;\n\n  if (name === 'props') {\n    props = { ...props, ...parseJson.call(this, updated) };\n  } else {\n    props[getPropKey(name)] = updated;\n  }\n\n  this.__properties = props;\n\n  render(h(this.__instance, { ...props, parent: this, children: this.__children }), this);\n}\n\n/* -----------------------------------\n *\n * Disconnected\n *\n * -------------------------------- */\n\nfunction onDisconnected(this: CustomElement) {\n  render(null, this);\n}\n\n/* -----------------------------------\n *\n * Finalise\n *\n * -------------------------------- */\n\nfunction finaliseComponent(this: CustomElement, component: ComponentFactory<IProps>) {\n  const { tagName } = this;\n  const { wrapComponent } = this.__options;\n\n  if (!component) {\n    console.error(ErrorTypes.Missing, `: <${tagName.toLowerCase()}>`);\n\n    return;\n  }\n\n  if (wrapComponent) {\n    component = wrapComponent(component);\n  }\n\n  this.__instance = component;\n  this.__mounted = true;\n\n  const props = {\n    ...this.__properties,\n    parent: this,\n    children: this.__children,\n  };\n\n  render(h(component, props), this);\n}\n\n/* -----------------------------------\n *\n * Export\n *\n * -------------------------------- */\n\nexport { define };\n"],"names":["ErrorTypes","isPromise","input","then","selfClosingTags","value","tagName","this","formatProps","__options","result","JSON","parse","_unused","console","error","Json","toLowerCase","getAttributeObject","attributes","length","i","item","name","getPropKey","sanitised","trim","replace","charAt","slice","toUpperCase","getElementAttributes","hasAttributes","allowed","Object","keys","values","indexOf","key","_excluded","parseHtml","dom","html","nodes","DOMParser","parseFromString","_unused2","body","getDocument","innerHTML","convertToVDom","call","node","_node$textContent","nodeType","textContent","nodeName","String","childNodes","Array","from","children","map","child","_getAttributeObject","slot","props","h","Fragment","includes","__slots","every","join","getSlotChildren","options","wrapComponent","elementTag","getElementTag","preRender","customElements","define","component","_class","formAssociated","Reflect","construct","CustomElement","HTMLElement","element","__mounted","__component","__properties","__children","observedAttributes","prototype","create","constructor","connectedCallback","onConnected","attributeChangedCallback","onAttributeChange","disconnectedCallback","onDisconnected","args","setupElement","content","Promise","server","type","dangerouslySetInnerHTML","__html","stringify","getAttribute","querySelector","parseJson","json","remove","hasAttribute","data","removeAttribute","response","renderer","finaliseComponent","getComponentResult","original","updated","render","__instance","parent","Missing","_extends"],"mappings":"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"}