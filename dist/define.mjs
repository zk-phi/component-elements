import{h as t,Fragment as e,render as n}from"preact";var o;!function(t){t.Promise="Error: Promises cannot be used for SSR",t.Missing="Error: Cannot find component in provided function",t.Json="Error: Invalid JSON string passed to component"}(o||(o={}));const r=t=>t&&"function"==typeof t.then,s=["area","base","br","col","hr","img","input","link","meta","source","embed","param","track","wbr"];function i(t){const{tagName:e}=this,{formatProps:n}=this.__options;let r={};try{r=JSON.parse(t)}catch{console.error(o.Json,`: <${e.toLowerCase()}>`)}return n&&(r=n(r)),r}function c(t){const e={};if(!t?.length)return e;for(let n=t.length-1;n>=0;n--){const o=t[n];e[o.name]=o.value}return e}function l(t){const e=t.trim().replace(/[\s_]/g,"-");return e.charAt(0).toLowerCase()+e.slice(1).replace(/-([a-z])/g,({1:t})=>t.toUpperCase())}function a(){const{attributes:t=[]}=this.__options;return this.hasAttributes()?function(t,e){const n=c(t);let o={};for(const t of Object.keys(n))-1!==e?.indexOf(t)&&(o[l(t)]=n[t]);return o}(this.attributes,t):{}}function p(){const t=function(t){const e=`<!DOCTYPE html>\n<html><body>${t}</body></html>`;let n;try{n=(new DOMParser).parseFromString(e,"text/html")}catch{}if(n)return n.body}(this.innerHTML);if(!t)return;const e=u.call(this,t);return()=>e}function u(n){if(3===n.nodeType)return n.textContent?.trim()||"";if(1!==n.nodeType)return null;const o=String(n.nodeName).toLowerCase(),r=Array.from(n.childNodes),i=()=>r.map(t=>u.call(this,t)),{slot:a,...p}=c(n.attributes);return"script"===o?null:"body"===o?t(e,{},i()):s.includes(o)?t(o,p):a?(this.__slots[l(a)]=function(n){return n.every(t=>"string"==typeof t)?n.join(" "):t(e,{},n)}(i()),null):t(o,p,i())}function h(e,n,s={}){const{wrapComponent:i}=s,c="undefined"==typeof window,l=function(t){let e=t.toLowerCase();return e.indexOf("-")<0&&(e="component-"+e),e}(e);if(!c)return void customElements.define(l,function(t,e={}){var n;const{attributes:o=[],formAssociated:r=!1}=e;if("undefined"!=typeof Reflect&&Reflect.construct){const n=function(){const o=Reflect.construct(HTMLElement,[],n);return o.__mounted=!1,o.__component=t,o.__properties={},o.__slots={},o.__children=void 0,o.__options=e,o};return n.observedAttributes=["props",...o],n.formAssociated=r,n.prototype=Object.create(HTMLElement.prototype),n.prototype.constructor=n,n.prototype.connectedCallback=_,n.prototype.attributeChangedCallback=d,n.prototype.disconnectedCallback=f,n}return n=class extends HTMLElement{constructor(...n){super(...n),this.__mounted=!1,this.__component=t,this.__properties={},this.__slots={},this.__children=void 0,this.__options=e}connectedCallback(){_.call(this)}attributeChangedCallback(){d.call(this,...[].slice.call(arguments))}disconnectedCallback(){f.call(this)}},n.observedAttributes=["props",...o],n.formAssociated=r,n}(n,s));const a=n();if(r(a))throw new Error(`${o.Promise} : <${e}>`);let p=a;return i&&(p=i(a)),e=>t(l,{server:!0},[t("script",{type:"application/json",dangerouslySetInnerHTML:{__html:JSON.stringify(e)}}),t(p,e)])}function _(){const e=a.call(this),n=this.getAttribute("props"),o=this.querySelector('[type="application/json"]'),s=i.call(this,n||o?.innerHTML||"{}");o?.remove();let c=this.__children;this.__mounted||this.hasAttribute("server")||(c=t(p.call(this),{})),this.__properties={...this.__slots,...s,...e},this.__children=c||[],this.removeAttribute("server"),this.innerHTML="";const l=this.__component(),u=t=>m.call(this,t);var h,_;r(l)?(h=l,_=this.tagName,h.then(t=>function(t,e){let n;return"function"==typeof t?t:("object"==typeof t&&(n=t[(o=e,(o=o.toLowerCase()).replace(/(^\w|-\w)/g,t=>t.replace(/-/,"").toUpperCase()))]||void 0),n);var o}(t,_))).then(u):u(l)}function d(e,o,r){if(!this.__mounted)return;r=null==r?void 0:r;let s=this.__properties;"props"===e?s={...s,...i.call(this,r)}:s[l(e)]=r,this.__properties=s,n(t(this.__instance,{...s,parent:this,children:this.__children}),this)}function f(){n(null,this)}function m(e){const{tagName:r}=this,{wrapComponent:s}=this.__options;if(!e)return void console.error(o.Missing,`: <${r.toLowerCase()}>`);s&&(e=s(e)),this.__instance=e,this.__mounted=!0;const i={...this.__properties,parent:this,children:this.__children};n(t(e,i),this)}export{h as define};
//# sourceMappingURL=define.mjs.map
